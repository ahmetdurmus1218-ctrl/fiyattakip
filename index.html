<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#3f51b5" />
  <title>FiyatTakip</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- AUTH OVERLAY (tam ekran) -->
  <div id="authOverlay" class="authOverlay">
    <div class="authCard">
      <div class="brandRow">
        <div class="logo">â‚º</div>
        <div>
          <div class="brandTitle">FiyatTakip</div>
          <div class="muted">GiriÅŸ yap / kayÄ±t ol</div>
        </div>
      </div>

      <div class="tabs">
        <button id="tabSignIn" class="tab active">GiriÅŸ</button>
        <button id="tabSignUp" class="tab">KayÄ±t</button>
      </div>

      <div id="authMsg" class="msg hidden"></div>

      <div id="panelSignIn">
        <label class="lbl">Email</label>
        <input id="inEmail" class="inp" type="email" placeholder="ornek@mail.com" autocomplete="email" />

        <label class="lbl">Åifre</label>
        <div class="pwrow">
          <input id="inPass" class="inp" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />
          <button id="toggleInPass" class="iconbtn" type="button" title="GÃ¶ster/Gizle">ğŸ‘</button>
        </div>

        <button id="btnSignIn" class="btn primary full">GiriÅŸ Yap</button>

        <div class="row">
          <button id="btnForgot" class="btn ghost full">Åifremi Unuttum</button>
          <button id="btnResendVerify" class="btn ghost full">DoÄŸrulama Maili</button>
        </div>
      </div>

      <div id="panelSignUp" class="hidden">
        <label class="lbl">Email</label>
        <input id="upEmail" class="inp" type="email" placeholder="ornek@mail.com" autocomplete="email" />

        <label class="lbl">Åifre</label>
        <div class="pwrow">
          <input id="upPass" class="inp" type="password" placeholder="En az 6 karakter" autocomplete="new-password" />
          <button id="toggleUpPass" class="iconbtn" type="button" title="GÃ¶ster/Gizle">ğŸ‘</button>
        </div>

        <label class="lbl">Åifre (Tekrar)</label>
        <div class="pwrow">
          <input id="upPass2" class="inp" type="password" placeholder="Åifre tekrar" autocomplete="new-password" />
          <button id="toggleUpPass2" class="iconbtn" type="button" title="GÃ¶ster/Gizle">ğŸ‘</button>
        </div>

        <button id="btnSignUp" class="btn primary full">Hesap OluÅŸtur</button>
        <div class="muted small">
          KayÄ±t sonrasÄ± doÄŸrulama maili gelir. Maili onaylamadan uygulama aÃ§Ä±lmaz.
        </div>
      </div>

      <div class="divider"></div>
      <div class="muted small">
        Bu sÃ¼rÃ¼m: Ã§oklu site arama + favori + fiyat geÃ§miÅŸi + %5 dÃ¼ÅŸÃ¼ÅŸ bildirimi + grafik.
      </div>
    </div>
  </div>

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="pill">fiyattakip</div>
    <div class="topActions">
      <button id="btnNotify" class="iconbtn" title="Bildirim Ä°zni">ğŸ””</button>
      <button id="btnAiToggle" class="iconbtn" title="AI Arama">ğŸ¤–</button>
      <button id="btnLogout" class="btn danger">Ã‡Ä±kÄ±ÅŸ</button>
    </div>
  </header>

  <main class="container" id="appRoot">
    <!-- SEARCH -->
    <section class="card">
      <h1>Fiyat Arama</h1>
      <p class="muted">
        ÃœrÃ¼n yaz, seÃ§tiÄŸin sitelerde arama aÃ§. Favoriye ekle. Fiyat ekleyince dÃ¼ÅŸÃ¼ÅŸ+grafik otomatik.
      </p>

      <div id="siteChips" class="chips"></div>

      <div class="searchRow">
        <input id="q" class="inp big" placeholder="Ã–rn: Xiaomi Pad 7 256GB" />
        <button id="btnSearch" class="btn primary">Ara</button>
      </div>

      <!-- AI DEMO -->
      <div id="aiBox" class="aiBox hidden">
        <div class="aiHead">
          <div class="aiTitle">AI Arama (Demo)</div>
          <div class="muted small">API key alanÄ± hazÄ±r; ÅŸimdilik demo cevap Ã¼retir.</div>
        </div>
        <input id="aiKey" class="inp" type="password" placeholder="Gemini/GPT API Key (demo)" />
        <textarea id="aiPrompt" class="inp" rows="3" placeholder="Ã–rn: 'Xiaomi Pad 7 256GB iÃ§in en iyi arama terimi nedir?'"></textarea>
        <button id="btnAiAsk" class="btn ghost">Ã–neri Al</button>
        <div id="aiResult" class="muted small" style="margin-top:8px"></div>
      </div>

      <div class="divider"></div>

      <div class="row between">
        <div>
          <div class="sectionTitle">Arama satÄ±rlarÄ±</div>
          <div class="muted small">Her satÄ±r: seÃ§ili sitede arama aÃ§ar + favoriye ekler.</div>
        </div>
        <button id="btnClearResults" class="btn ghost">Temizle</button>
      </div>

      <div id="resultList" class="list empty">HenÃ¼z arama yapÄ±lmadÄ±.</div>
    </section>

    <!-- FAVORITES -->
    <section class="card">
      <div class="row between">
        <div>
          <div class="sectionTitle">â¤ï¸ Favoriler</div>
          <div class="muted small">Linkler gizli. Site butonlarÄ± + Copy Link var. %5+ dÃ¼ÅŸÃ¼ÅŸte bildirim.</div>
        </div>
        <div class="row">
          <button id="btnRefreshFav" class="btn ghost">Yenile</button>
        </div>
      </div>

      <div id="favList" class="favGrid empty">Favori yok.</div>
    </section>
  </main>

  <!-- MODALS -->
  <div id="backdrop" class="backdrop hidden"></div>

  <!-- PRICE MODAL -->
  <div id="priceModal" class="modal hidden">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle">Fiyat Ekle</div>
          <div id="pmInfo" class="muted small"></div>
        </div>
        <button id="pmClose" class="iconbtn">âœ•</button>
      </div>

      <div class="modalBody">
        <label class="lbl">Fiyat (TL)</label>
        <input id="pmPrice" class="inp" type="number" inputmode="numeric" placeholder="Ã–rn: 12999" />
        <label class="lbl">Not (opsiyonel)</label>
        <input id="pmNote" class="inp" type="text" placeholder="Ã–rn: kupon / kampanya" />

        <div class="row" style="margin-top:10px">
          <button id="pmCancel" class="btn ghost full">Ä°ptal</button>
          <button id="pmSave" class="btn primary full">Kaydet</button>
        </div>
        <div class="muted small" style="margin-top:10px">
          Kural: Son kayda gÃ¶re <b>%5 ve Ã¼zeri dÃ¼ÅŸÃ¼ÅŸ</b> olursa uyarÄ± + bildirim gÃ¶sterilir.
        </div>
      </div>
    </div>
  </div>

  <!-- CHART MODAL -->
  <div id="chartModal" class="modal hidden">
    <div class="modalCard wide">
      <div class="modalHead">
        <div>
          <div id="cmTitle" class="modalTitle">Fiyat GrafiÄŸi</div>
          <div id="cmSub" class="muted small"></div>
        </div>
        <button id="cmClose" class="iconbtn">âœ•</button>
      </div>
      <div class="modalBody">
        <canvas id="bigChart" height="240"></canvas>
        <div id="cmTable" class="table"></div>
      </div>
    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <script type="module" src="firebase.js"></script>
  <script type="module" src="app.js"></script>
</body>
  </html>
