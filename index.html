<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#3f51b5" />
  <title>FiyatTakip</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- LOGIN OVERLAY (arka menÃ¼ gÃ¶rÃ¼nmez) -->
  <div id="authOverlay" class="overlay">
    <div class="auth-card">
      <div class="auth-brand">
        <div class="logo">â‚º</div>
        <div>
          <div class="brand-title">FiyatTakip</div>
          <div class="brand-sub">GiriÅŸ yap / kayÄ±t ol</div>
        </div>
      </div>

      <div class="tabs">
        <button id="tabSignIn" class="tab active">GiriÅŸ</button>
        <button id="tabSignUp" class="tab">KayÄ±t</button>
      </div>

      <div id="authMsg" class="msg hidden"></div>

      <div id="signInPanel">
        <label class="lbl">Email</label>
        <input id="inEmail" class="inp" type="email" placeholder="ornek@mail.com" autocomplete="email" />
        <label class="lbl">Åifre</label>
        <div class="pwrow">
          <input id="inPass" class="inp" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />
          <button id="btnToggleInPass" class="iconbtn" title="GÃ¶ster/Gizle">ğŸ‘</button>
        </div>

        <button id="btnSignIn" class="btn primary">GiriÅŸ Yap</button>

        <div class="row">
          <button id="btnForgot" class="btn ghost">Åifremi Unuttum</button>
          <button id="btnResendVerify" class="btn ghost">DoÄŸrulama Maili Tekrar</button>
        </div>
      </div>

      <div id="signUpPanel" class="hidden">
        <label class="lbl">Email</label>
        <input id="upEmail" class="inp" type="email" placeholder="ornek@mail.com" autocomplete="email" />
        <label class="lbl">Åifre</label>
        <div class="pwrow">
          <input id="upPass" class="inp" type="password" placeholder="En az 6 karakter" autocomplete="new-password" />
          <button id="btnToggleUpPass" class="iconbtn" title="GÃ¶ster/Gizle">ğŸ‘</button>
        </div>
        <label class="lbl">Åifre (Tekrar)</label>
        <div class="pwrow">
          <input id="upPass2" class="inp" type="password" placeholder="Åifre tekrar" autocomplete="new-password" />
          <button id="btnToggleUpPass2" class="iconbtn" title="GÃ¶ster/Gizle">ğŸ‘</button>
        </div>

        <button id="btnSignUp" class="btn primary">Hesap OluÅŸtur</button>
        <div class="smallmuted">
          KayÄ±t olunca doÄŸrulama maili gelir. Maili onaylamadan uygulama aÃ§Ä±lmaz.
        </div>
      </div>

      <div class="divider"></div>
      <div class="smallmuted">
        Not: Bu sÃ¼rÃ¼m â€œarama aÃ§ar + favori + manuel fiyat kaydÄ± + %5+ indirim uyarÄ±sÄ± + grafikâ€ yapar.
      </div>
    </div>
  </div>

  <!-- APP -->
  <header class="topbar">
    <div class="pill">fiyattakip</div>
    <button id="btnMenu" class="hamburger" title="MenÃ¼">â˜°</button>
  </header>

  <main class="container">
    <section class="card hero">
      <h1>Fiyat KarÅŸÄ±laÅŸtÄ±r</h1>
      <p class="sub">
        ÃœrÃ¼n adÄ±nÄ± yaz, seÃ§tiÄŸin sitelerde arama aÃ§. Favoriye ekle. Fiyat girince %5+ indirimleri bildirir ve grafik tutar.
      </p>

      <div class="siteChips" id="siteChips"></div>

      <div class="searchRow">
        <input id="q" class="inp big" placeholder="ÃœrÃ¼n adÄ±nÄ± yazÄ±n..." />
        <button id="btnSearch" class="btn primary big">Ara</button>
      </div>

      <div class="note">
        <b>Not:</b> Siteler tarayÄ±cÄ±dan otomatik fiyat vermiyor (CORS/bot). Bu yÃ¼zden bu uygulama
        <b>arama aÃ§ar</b>, sonra favoride <b>fiyatÄ± sen girersin</b> ve indirim/graph otomatik olur.
      </div>

      <div class="results">
        <div class="resultsHead">
          <div>
            <b>Arama sonuÃ§larÄ± (site bazlÄ±)</b>
            <div class="smallmuted">Her satÄ±r seÃ§ili sitede arama aÃ§ar + favoriye ekler.</div>
          </div>
          <button id="btnClearResults" class="btn ghost">Temizle</button>
        </div>
        <div id="resultList" class="list empty">HenÃ¼z arama yapÄ±lmadÄ±.</div>
      </div>
    </section>

    <section class="card">
      <div class="sectionHead">
        <div>
          <h2>â¤ï¸ Favoriler</h2>
          <div class="smallmuted">KaydettiÄŸin Ã¼rÃ¼nler burada. Linkler gizli; butonlarÄ±n iÃ§ine gÃ¶mÃ¼lÃ¼.</div>
        </div>
        <div class="sectionActions">
          <button id="btnAskNotify" class="btn ghost">Bildirim Ä°zni Ver</button>
          <button id="btnDeleteAllFav" class="btn danger">Favorileri Sil</button>
        </div>
      </div>

      <div id="favList" class="favGrid empty">Favori yok.</div>
    </section>

    <footer class="foot">
      <button id="btnLogout" class="btn ghost">Ã‡Ä±kÄ±ÅŸ Yap</button>
      <span class="smallmuted">Â© FiyatTakip</span>
    </footer>
  </main>

  <!-- MODALS -->
  <div id="modalBackdrop" class="backdrop hidden"></div>

  <div id="priceModal" class="modal hidden">
    <div class="modalHead">
      <div>
        <div class="modalTitle" id="pmTitle">Fiyat Ekle</div>
        <div class="smallmuted" id="pmSub"></div>
      </div>
      <button id="pmClose" class="iconbtn">âœ•</button>
    </div>

    <div class="modalBody">
      <label class="lbl">Mevcut fiyat (TL)</label>
      <input id="pmPrice" class="inp" type="number" inputmode="numeric" placeholder="Ã–rn: 12999" />

      <label class="lbl">Not (opsiyonel)</label>
      <input id="pmNote" class="inp" type="text" placeholder="Ã–rn: kampanya, kupon vs" />

      <div class="row">
        <button id="pmSave" class="btn primary">Kaydet</button>
        <button id="pmCancel" class="btn ghost">Ä°ptal</button>
      </div>

      <div class="divider"></div>
      <div class="smallmuted">
        Kural: Son kayda gÃ¶re <b>%5 ve Ã¼zeri dÃ¼ÅŸÃ¼ÅŸ</b> varsa uyarÄ± + bildirim gÃ¶sterilir.
      </div>
    </div>
  </div>

  <div id="chartModal" class="modal hidden">
    <div class="modalHead">
      <div>
        <div class="modalTitle" id="cmTitle">Fiyat GrafiÄŸi</div>
        <div class="smallmuted" id="cmSub"></div>
      </div>
      <button id="cmClose" class="iconbtn">âœ•</button>
    </div>

    <div class="modalBody">
      <canvas id="bigChart" width="900" height="360" class="chartCanvas"></canvas>
      <div id="cmTable" class="table"></div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
